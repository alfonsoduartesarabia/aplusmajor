{"version":3,"sources":["Reducer.tsx","Instruments.tsx","SideNav.tsx","Visualizers.tsx","MainPage.tsx","instruments/Piano.tsx","instruments/thetulga.tsx","visualizers/Waveform.tsx","visualizers/alfonsoduartesarabia.tsx","visualizers/thetulga.tsx","visualizers/ezra.tsx","instruments/Grid.tsx","Socket.tsx","instruments/alfonsoduartesarabia.tsx","instruments/ezraplayer.tsx","visualizers/chaoyiying.tsx","instruments/Xylophone.tsx","State.tsx","App.tsx","index.tsx","instruments/Grid.module.css"],"names":["DispatchAction","type","args","this","fromJS","appReducer","state","action","console","debug","newState","oldSocket","get","close","set","delete","songs","notes","find","s","pathname","getIn","search","instrumentName","substring","visualizerName","URLSearchParams","instruments","visualizers","instrument","i","name","visualizer","v","error","toJS","update","Instrument","component","TopNav","className","InstrumentContainer","dispatch","InstrumentComponent","useState","Tone","oscillator","toDestination","synth","setSynth","useEffect","eachNote","split","noteObjs","map","note","idx","time","velocity","log","value","triggerAttackRelease","length","start","cancel","style","top","Section","title","children","Playlist","RadioButton","to","text","active","onClick","classNames","fw7","Instruments","activeInstrument","location","useLocation","Visualizers","activeVisualizer","Songs","List","query","setQuery","onChange","event","target","filter","song","toLowerCase","includes","id","SideNav","Visualizer","draw","VisualizerContainer","analyzer","useMemo","onResize","useCallback","p5","width","window","innerWidth","height","innerHeight","resizeCanvas","volume","connect","disconnect","setup","canvasParentRef","createCanvas","parent","windowResized","InstrumentPanel","VisualizerPanel","InstrumentAndVisualizer","left","ShowWelcome","MainPage","isWelcome","PianoKey","minor","index","onMouseDown","triggerAttack","onMouseUp","triggerRelease","zIndex","marginLeft","PianoType","PianoInstrument","keys","oscillators","Range","octave","key","isMinor","indexOf","o","newType","oldSynth","LaunchPadKey","keyCode","soundPath","themeColor","isKeyDown","setKeyDown","isReady","setReady","player","cssBase","cssClass","keyDownEventHandler","loaded","code","repeat","keyUpEventHandler","stop","addEventListener","load","then","catch","err","removeEventListener","GuitarInstrument","setSong","chain","setChain","activeIndex","setActive","chainPath","songPath","sequence","keyToCode","Map","sounds","sound","arrowBaseClass","list","slice","WaveformVisualizer","dim","Math","min","background","strokeWeight","stroke","noFill","values","getValue","beginShape","amplitude","x","y","vertex","endShape","particles","isPressed","StarVisualizer","fill","angleMode","translate","floor","r","sin","cos","pos","P5","Vector","random2D","mult","noStroke","ellipse","push","Particle","forEach","p","move","splice","createButton","button","position","color","mousePressed","vel","acc","w","xSpeed","ySpeed","alpha","show","add","reset","createVector","copy","random","Circle","colors","angle","radius","centerY","centerX","len","x1","x2","y1","y2","line","Smiley","maxAmp","arc","ampMod","center","arcSeg","Grid","props","alignItems","column","expanded","justify","lg","md","row","sm","isRow","classes","styles","SOCKET_OPTS","transports","path","autoConnect","reconnection","timeout","idCounter","send","socket","msg","a","_id","Promise","resolve","reject","once","resp","success","emit","response","CreateGrid","sampler","recorder","urls","A0","B0","C0","A4","B5","C6","D7","E1","F2","release","baseUrl","isRec","setIsRec","audioUrl","setAudioURL","url","saveNotes","onMouseLeave","disabled","saveNotesToDB","setTimeout","recording","URL","createObjectURL","anchor","document","createElement","download","href","click","controls","src","DrumMachineInstrument","setVolume","max","e","chord","initialNote","chordTones","timeInterval","chordTone","toString","playChord","ChordType","FluteInstrument","setChord","flute","setFlute","basicChords","seventhChords","newSynth","envelope","attack","attackCurve","decay","releaseCurve","sustain","tremolo","freeverb","dampening","c","MultiShapeVisualizer","DEGREES","j","r1Min","frameCount","r1Max","r2Min","r2Max","Particles","toDeleted","vx","vy","Container","D1","F1","G1","A1","B1","C1","D0","XylophoneInstrument","defaultState","App","useReducer","onConnect","onDisconnect","newSocket","on","initializeSocket","rootEl","getElementById","ReactDOM","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.7cf8a951.chunk.js","sourcesContent":["// 3rd party\nimport { List, Map, fromJS } from 'immutable';\n\n// project deps\nimport { Instrument } from './Instruments';\nimport { Visualizer } from './Visualizers';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * All user input is handled by DispatchAction.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n * 'songs': List<string>\n * 'notes': List<{id: number, songTitle: string, notes: string}>\n */\ntype DispatchArgs = {\n  [key: string]: any;\n};\n\n// A simple algebraic data-type with string literal types\ntype DispatchActionType =\n  | 'SET_SOCKET'\n  | 'DELETE_SOCKET'\n  | 'SET_SONGS'\n  | 'PLAY_SONG'\n  | 'STOP_SONG'\n  | 'SET_LOCATION';\n\nexport class DispatchAction {\n  readonly type: DispatchActionType;\n  readonly args: Map<string, any>;\n\n  constructor(type: DispatchActionType, args?: DispatchArgs) {\n    this.type = type;\n    this.args = fromJS(args) as Map<string, any>;\n  }\n}\n\n/** ------------------------------------------------------------------------ **\n * Top-level application reducer.\n ** ------------------------------------------------------------------------ */\n\nexport function appReducer(state: AppState, action: DispatchAction): AppState {\n  const { type, args } = action;\n\n  console.debug(`${type}`);\n\n  // Question: Does this function remind of you registering callbacks?\n  const newState = (() => {\n    switch (type) {\n      case 'SET_SOCKET': {\n        const oldSocket = state.get('socket');\n        if (oldSocket) {\n          oldSocket.close();\n        }\n\n        return state.set('socket', args.get('socket'));\n      }\n      case 'DELETE_SOCKET': {\n        return state.delete('socket');\n      }\n      case 'SET_SONGS': {\n        const songs = args.get('songs');\n        return state.set('songs', songs);\n      }\n      case 'PLAY_SONG': {\n        const notes = state\n          .get('songs')\n          .find((s: any) => s.get('id') === args.get('id'))\n          .get('notes');\n        return state.set('notes', notes);\n      }\n      case 'STOP_SONG': {\n        return state.delete('notes');\n      }\n      case 'SET_LOCATION': {\n        const pathname = args.getIn(['location', 'pathname'], '') as string;\n        const search = args.getIn(['location', 'search'], '') as string;\n\n        const instrumentName: string = pathname.substring(1);\n        const visualizerName: string =\n          new URLSearchParams(search.substring(1)).get('visualizer') ?? '';\n        const instruments: List<Instrument> = state.get('instruments');\n        const visualizers: List<Visualizer> = state.get('visualizers');\n\n        const instrument = instruments.find(i => i.name === instrumentName);\n        const visualizer = visualizers.find(v => v.name === visualizerName);\n\n        return state\n          .set('instrument', instrument)\n          .set('visualizer', visualizer);\n      }\n      default:\n        console.error(`type unknown: ${type}\\n`, args.toJS());\n        return state;\n    }\n  })();\n\n  console.debug(newState.update('socket', s => (s ? '[socket]' : s)).toJS());\n\n  return newState;\n}\n","// 3rd party library imports\nimport React, { useState, useEffect } from 'react';\nimport * as Tone from 'tone';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of an Instruments.\n ** ------------------------------------------------------------------------ */\n\nexport interface InstrumentProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  name: string;\n  synth: Tone.Synth;\n  setSynth: (f: (oldSynth: Tone.Synth) => Tone.Synth) => void;\n}\n\nexport class Instrument {\n  public readonly name: string;\n  public readonly component: React.FC<InstrumentProps>;\n\n  constructor(name: string, component: React.FC<InstrumentProps>) {\n    this.name = name;\n    this.component = component;\n  }\n}\n\nfunction TopNav({ name }: { name: string }) {\n  return (\n    <div\n      className={\n        'w-100 h3 bb b--light-gray flex justify-between items-center ph4'\n      }\n    >\n      <div>{name}</div>\n    </div>\n  );\n}\n\ninterface InstrumentContainerProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  instrument: Instrument;\n}\n\nexport const InstrumentContainer: React.FC<InstrumentContainerProps> = ({\n  instrument,\n  state,\n  dispatch,\n}: InstrumentContainerProps) => {\n  const InstrumentComponent = instrument.component;\n  const [synth, setSynth] = useState(\n    new Tone.Synth({\n      oscillator: { type: 'sine' } as Tone.OmniOscillatorOptions,\n    }).toDestination(),\n  );\n\n  const notes = state.get('notes');\n\n  useEffect(() => {\n    \n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note: string, idx: number) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1,\n      }));\n      console.log(\"NOTES PLAYING\", notes)\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n\n      Tone.Transport.start();\n\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, dispatch]);\n\n  return (\n    <div>\n      <TopNav name={instrument.name} />\n      <div\n        className={'bg-white absolute right-0 left-0'}\n        style={{ top: '4rem' }}\n      >\n        <InstrumentComponent\n          name={instrument.name}\n          state={state}\n          dispatch={dispatch}\n          synth={synth}\n          setSynth={setSynth}\n        />\n      </div>\n    </div>\n  );\n};\n","// 3rd party library imports\nimport classNames from 'classnames';\nimport { List } from 'immutable';\nimport React, { useState } from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport {\n  RadioButton20,\n  RadioButtonChecked20,\n  Music20,\n} from '@carbon/icons-react';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\nimport { Instrument } from './Instruments';\nimport { Visualizer } from './Visualizers';\n\n\n/** ------------------------------------------------------------------------ **\n * All the components in the side navigation.\n ** ------------------------------------------------------------------------ */\n\ninterface SideNavProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n}\n\nconst Section: React.FC<{ title: string }> = ({ title, children }) => {\n  return (\n    <div className=\"flex flex-column bb b--light-gray light-gray bg-blue pa3\">\n      <div className=\"fw7 mb2\">{title} </div>\n      <div className=\"flex-auto\">{children}</div>\n    </div>\n  );\n};\n\ninterface RadioButtonProps {\n  to: any,\n  text: string,\n  active: boolean,\n  onClick: () => void\n}\n\nconst Playlist: React.FC<{ title: string }> = ({ title, children }) => {\n  return (\n    <div className=\"flex flex-column bb h-50 b--light-gray light-gray bg-blue pa3\">\n      <div className=\"fw7 mb2\">{title} </div>\n      <div className=\"flex-auto\">{children}</div>\n    </div>\n  );\n};\n\nfunction RadioButton({ to, text, active, onClick }: RadioButtonProps): JSX.Element {\n  return (\n    <Link to={to} className=\"no-underline\">\n      <div\n        className={classNames('f6 flex items-center near-white', { fw7: active })}\n        onClick={onClick}\n      >\n        {active ? (\n          <RadioButtonChecked20 className=\"mr1\" />\n        ) : (\n          <RadioButton20 className=\"mr1\" />\n        )}\n        <div className=\"dim\">{text}</div>\n      </div>\n    </Link>\n  );\n}\n\nfunction Instruments({ state }: SideNavProps): JSX.Element {\n  const instruments: List<Instrument> = state.get('instruments');\n  const activeInstrument = state.get('instrument')?.name;\n  const location = useLocation();\n\n  return (\n    <Section title=\"Instruments\">\n      {instruments.map(i => (\n        <RadioButton\n          key={i.name}\n          to={`./${i.name}${location.search}`}\n          text={i.name}\n          active={i.name === activeInstrument}\n          onClick={() => console.log(i.name)}\n        />\n      ))}\n    </Section>\n  );\n}\n\nfunction Visualizers({ state }: SideNavProps): JSX.Element {\n  const visualizers: List<Visualizer> = state.get('visualizers');\n  const activeVisualizer = state.get('visualizer')?.name;\n  const location = useLocation();\n\n  return (\n    <Section title=\"Visualizers\">\n      {visualizers.map(v => (\n        <RadioButton\n          key={v.name}\n          to={{\n            pathname: location.pathname,\n            search: `?visualizer=${v.name}`,\n          }}\n          text={v.name}\n          active={v.name === activeVisualizer}\n          onClick={() => console.log(v.name)}\n        />\n      ))}\n    </Section>\n  );\n}\n\nfunction Songs({ state, dispatch }: SideNavProps): JSX.Element {\n  const songs: List<any> = state.get('songs', List());\n  const [query, setQuery] = useState(\"\");\n\n\n  return (\n    <Playlist title=\"Playlist\">\n      {<input className=\"w-100\" onChange={ event => {\n      setQuery(event.target.value); \n      console.log(query)\n      //console.log(songs.filter(song => song.get('song_title').includes(query)));\n      }\n      }/>}\n      {songs.filter(song => \n        song\n          .get('song_title')\n          .toLowerCase()\n          .includes(query.toLowerCase()) ||  song\n          .get('artist')\n          .toLowerCase()\n          .includes(query.toLowerCase()))\n          .map(song => ( // Change this to arr.filter and filter based on query\n        <div\n          key={song.get('id')}\n          className=\"f6 pointer underline no-underline i dim flex flex-column bt\"\n          onClick={() =>{\n              dispatch(new DispatchAction('PLAY_SONG', { id: song.get('id') }))\n            }\n          }\n        >\n          \n          <div className=\"flex items-center\"> \n              <Music20 className=\"mr1\" />\n              {\"Song Title: \" + song.get('song_title')}\n            </div>\n            <div>\n              {\"Artist: \" + song.get('artist')}\n            </div>\n        </div>\n      ))}\n    </Playlist>\n  );\n}\n\nexport function SideNav({ state, dispatch }: SideNavProps): JSX.Element {\n  return (\n    <div className=\"absolute top-0 left-0 bottom-0 w5 h-100 z-1 shadow-1 flex light-gray bg-blue flex-column\">\n      <div className=\"h3 fw7 f5 flex items-center pl3 bb b--light-gray\">\n        A+ Major\n      </div>\n      <div className=\"flex-column h-100\">\n        <Instruments state={state} dispatch={dispatch} />\n        <Visualizers state={state} dispatch={dispatch} />\n        <Songs state={state} dispatch={dispatch} />\n      </div>\n    </div>\n  );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport Sketch from 'react-p5';\nimport P5 from 'p5';\nimport React, { useEffect, useMemo, useCallback } from 'react';\n\ntype VisualizerDrawer = (p5: P5, analyzer: Tone.Analyser) => void;\n\ninterface VisualizerContainerProps {\n  visualizer: Visualizer;\n}\n\nexport class Visualizer {\n  public readonly name: string;\n  public readonly draw: VisualizerDrawer;\n\n  constructor(name: string, draw: VisualizerDrawer) {\n    this.name = name;\n    this.draw = draw;\n  }\n}\n\nexport function VisualizerContainer({ visualizer }: VisualizerContainerProps) {\n  const { name, draw } = visualizer;\n\n  const analyzer: Tone.Analyser = useMemo(\n    () => new Tone.Analyser('waveform', 256),\n    [],\n  );\n\n  const onResize = useCallback((p5: P5) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n\n    p5.resizeCanvas(width, height, false);\n  }, []);\n\n  useEffect(() => {\n    Tone.getDestination().volume.value = -5;\n    Tone.getDestination().connect(analyzer);\n    return () => {\n      Tone.getDestination().disconnect(analyzer);\n    };\n  }, [analyzer]);\n\n  const setup = (p5: P5, canvasParentRef: Element) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    p5.createCanvas(width, height).parent(canvasParentRef);\n  };\n\n  return (\n    <div className={'bg-black absolute bottom-0 right-0 left-0 h-50'}>\n      <div className={'z-1 absolute left-0 top-0 pa4 white f5'}>{name}</div>\n      <Sketch\n        setup={setup}\n        draw={p5 => draw(p5, analyzer)}\n        windowResized={onResize}\n      />\n    </div>\n  );\n}\n","// 3rd party library imports\nimport React, { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport * as Tone from 'tone';\nimport { Music32 } from '@carbon/icons-react';\n\n// project imports\nimport { InstrumentContainer } from './Instruments';\nimport { AppState } from './State';\nimport { DispatchAction } from './Reducer';\nimport { SideNav } from './SideNav';\nimport { VisualizerContainer } from './Visualizers';\n\ntype PanelProps = {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n};\n\n/** ------------------------------------------------------------------------ **\n * Instrument and visualizer component\n ** ------------------------------------------------------------------------ */\n\nfunction InstrumentPanel({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the instrument.\n   */\n  const instrument = state.get('instrument');\n\n  return (\n    <div>\n      {instrument && (\n        <InstrumentContainer\n          state={state}\n          dispatch={dispatch}\n          instrument={instrument}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction VisualizerPanel({ state }: PanelProps): JSX.Element {\n  /**\n   * This React component is the top-level for the visualizer.\n   */\n  const visualizer = state.get('visualizer');\n\n  return (\n    <div>\n      {visualizer && (\n        <VisualizerContainer key={visualizer.name} visualizer={visualizer} />\n      )}\n    </div>\n  );\n}\n\nfunction InstrumentAndVisualizer({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles the instrument panel and visualizer panel together.\n   */\n\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column\"\n      style={{ left: '16rem' }}\n    >\n      <InstrumentPanel state={state} dispatch={dispatch} />\n      <VisualizerPanel state={state} dispatch={dispatch} />\n    </div>\n  );\n}\n\nfunction ShowWelcome(): JSX.Element {\n  return (\n    <div\n      className=\"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center\"\n      style={{ left: '16rem' }}\n    >\n      <div className=\"mw6 lh-copy mb4\">\n        <Music32 />\n        <div className=\"f3 fw7 mb2\">A+ Major Instruments and Visualizers</div>\n        <div className=\"f4 mb3\">\n          Select an instrument and a visualizer on the left to serve some fresh\n          beats.\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/** ------------------------------------------------------------------------ **\n * Main page component\n ** ------------------------------------------------------------------------ */\n\nexport function MainPage({ state, dispatch }: PanelProps): JSX.Element {\n  /**\n   * This React component bundles together the entire main page.\n   */\n\n  const location = useLocation();\n  const isWelcome = !state.get('instrument');\n  console.log('INSTRUMENT', isWelcome);\n\n  useEffect(() => {\n    dispatch(new DispatchAction('SET_LOCATION', { location }));\n  }, [dispatch, location]);\n\n  return (\n    <div\n      className=\"fixed top-0 left-0 h-100 w-100 bg-white\"\n      onClick={() => Tone.start()}\n    >\n      <SideNav state={state} dispatch={dispatch} />\n      {isWelcome ? (\n        <ShowWelcome />\n      ) : (\n        <InstrumentAndVisualizer state={state} dispatch={dispatch} />\n      )}\n    </div>\n  );\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface PianoKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n}\n\nexport function PianoKey({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => synth?.triggerAttack(`${note}`)} // Question: what is `onMouseDown`?\n      onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor, // minor keys are black\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{\n        // CSS\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      }}\n    ></div>\n  );\n}\n\n// eslint-disable-next-line\nfunction PianoKeyWithoutJSX({\n  note,\n  synth,\n  minor,\n  index,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component for pedagogical purposes.\n   * See `PianoKey` for the React component with JSX (JavaScript XML).\n   */\n  return React.createElement(\n    'div',\n    {\n      onMouseDown: () => synth?.triggerAttack(`${note}`),\n      onMouseUp: () => synth?.triggerRelease('+0.25'),\n      className: classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor,\n        'black bg-white h4': !minor,\n      }),\n      style: {\n        top: 0,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      },\n    },\n    [],\n  );\n}\n\nfunction PianoType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction Piano({ synth, setSynth }: InstrumentProps): JSX.Element {\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = (newType: Tone.ToneOscillatorType) => {\n    setSynth(oldSynth => {\n      oldSynth.disconnect();\n\n      return new Tone.Synth({\n        oscillator: { type: newType } as Tone.OmniOscillatorOptions,\n      }).toDestination();\n    });\n  };\n\n  const oscillators: List<OscillatorType> = List([\n    'sine',\n    'sawtooth',\n    'square',\n    'triangle',\n    'fmsine',\n    'fmsawtooth',\n    'fmtriangle',\n    'amsine',\n    'amsawtooth',\n    'amtriangle',\n  ]) as List<OscillatorType>;\n\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(2, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave}`;\n            return (\n              <PianoKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave}\n                index={(octave - 2) * 7 + key.idx}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className={'pl4 pt4 flex'}>\n        {oscillators.map(o => (\n          <PianoType\n            key={o}\n            title={o}\n            onClick={() => setOscillator(o)}\n            active={synth?.oscillator.type === o}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport const PianoInstrument = new Instrument('Piano', Piano);\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport { List, Range } from 'immutable';\nimport React , { useState, useEffect }from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport { act } from '@testing-library/react';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface LaunchpadKeyProps {\n  note: string; \n  keyCode: string;\n  duration?: string;\n  soundPath?: string; \n  themeColor?: string\n}\n\nexport function LaunchPadKey({ note, keyCode, soundPath, themeColor }: LaunchpadKeyProps): JSX.Element {\n  const [isKeyDown, setKeyDown] = useState(false)\n  const [isReady, setReady] = useState(false)\n  let player = new Tone.Player().toDestination()\n  let cssBase = \"flex w3 h3 ba ml3 items-center justify-center \"\n  \n  let cssClass = !isKeyDown ? cssBase + \"bg-white\" : cssBase + themeColor\n  cssClass += !isReady ? cssBase + \"bg-gray\" : cssClass\n  const keyDownEventHandler = (event) => {\n    if (!player.loaded) return\n    if (event.code !== keyCode) return\n    if (event.repeat) return\n    player?.start()\n    setKeyDown(true)\n  }\n\n  const keyUpEventHandler = (event) => {\n    if (!player.loaded) return\n    if (event.code !== keyCode) return\n    player?.stop()\n    setKeyDown(false)\n  }\n\n  const handleKeyDown = (event) => {\n    if (!player.loaded) return\n    setKeyDown(true)\n    player?.start()\n  }\n  const handleKeyUp = () => {\n    if (!player.loaded) return\n    player?.stop()\n    setKeyDown(false)\n  }\n  useEffect(() => {\n    window.addEventListener('keydown', keyDownEventHandler)\n    window.addEventListener('keyup', keyUpEventHandler)\n    player\n      .load(\"/\" + soundPath)\n      .then(() => {\n        setReady(true)\n      })\n      .catch( err => {\n        // console.log(\"error loading song\", err)\n        setReady(false)\n        return null\n      })\n    return () => {\n      window.removeEventListener('keydown', keyDownEventHandler);\n      window.removeEventListener('keyup', keyUpEventHandler);\n    }\n  });\n\n  return (\n    <div className={cssClass} onMouseDown={handleKeyDown} onMouseUp={handleKeyUp}>\n      <code>{note}</code>\n    </div>\n  );\n}\n\nfunction Launchpad({ synth, setSynth }: InstrumentProps): JSX.Element {\n  const [song, setSong] = useState(\"animals\")\n  const [chain, setChain] = useState(\"1\")\n  const [activeIndex, setActive] = useState(0)\n  let chainPath :string = \"chain\" + chain + \"/\"\n  let songPath :string = song + \"/\"\n  const sequence :string[] = [\n    \"Z\", \"X\", \"C\", \"V\", \"F\", \"D\", \"S\", \"A\", \n    \"Q\", \"W\", \"E\", \"E\", \"R\", \"R\", \"4\", \"3\", \"E\", \"R\", \"R\", \"2\",\n    \"M\", \",\", \".\", \"/\", \";\", \"L\", \"K\", \"J\",\n    \"U\", \"I\", \"O\", \"O\", \"P\", \"P\", \"0\", \"9\", \"8\", \"7\", \"ArrowLeft\",\n    \"1\", \"M\", \"M\", \",\", \".\", \"/\", \n    \";\", \"L\", \"K\", \"J\", \"U\", \n    \"O\", \"O\", \"P\", \"P\", \"P\", \n    \"1\", \"U\", \"8\", \"I\",\n  ]\n  const keyToCode :Map<String, String> = new Map();\n  const sounds = {\n    \"1\": {\n      'Digit1': \"a0.mp3\",\n      'Digit2': \"a1.mp3\",\n      'Digit3': \"a2.mp3\",\n      'Digit4': \"a3.mp3\",\n      'Digit5': \"5.mp3\",\n      'Digit6': \"6.mp3\",\n      'Digit7': \"b0.mp3\",\n      'Digit8': \"b1.mp3\",\n      'Digit9': \"b2.mp3\",\n      'Digit0': \"b3.mp3\",\n      'KeyQ': \"a4.mp3\",\n      'KeyW': \"a5.mp3\",\n      'KeyE': \"a6.mp3\",\n      'KeyR': \"a7.mp3\",\n      'KeyT': \"t.mp3\",\n      'KeyY': \"y.mp3\",\n      'KeyU': \"b4.mp3\",\n      'KeyI': \"b5.mp3\",\n      'KeyO': \"b6.mp3\",\n      'KeyP': \"b7.mp3\",\n      'KeyA': \"a8.mp3\",\n      'KeyS': \"a9.mp3\",\n      'KeyD': \"a10.mp3\",\n      'KeyF': \"a11.mp3\",\n      'KeyG': \"g.mp3\",\n      'KeyH': \"h.mp3\",\n      'KeyJ': \"b8.mp3\",\n      'KeyK': \"b9.mp3\",\n      'KeyL': \"b10.mp3\",\n      'Semicolon': \"b11.mp3\",\n      'KeyZ': \"a12.mp3\",\n      'KeyX': \"a13.mp3\",\n      'KeyC': \"a14.mp3\",\n      'KeyV': \"a15.mp3\",\n      'KeyB': \"b.mp3\",\n      'KeyN': \"n.mp3\",\n      'KeyM': \"b12.mp3\",\n      'Comma': \"b13.mp3\",\n      'Period': \"b14.mp3\",\n      'Slash': \"b15.mp3\",\n    }, \n    \"2\": {\n      'Digit1': \"c12.mp3\",\n      'Digit2': \"1.mp3\",\n      'Digit3': \"2.mp3\",\n      'Digit4': \"3.mp3\",\n      'Digit5': \"5.mp3\",\n      'Digit6': \"6.mp3\",\n      'Digit7': \"d0.mp3\",\n      'Digit8': \"d1.mp3\",\n      'Digit9': \"d2.mp3\",\n      'Digit0': \"d3.mp3\",\n      'KeyQ': \"4.mp3\",\n      'KeyW': \"5.mp3\",\n      'KeyE': \"6.mp3\",\n      'KeyR': \"7.mp3\",\n      'KeyT': \"t.mp3\",\n      'KeyY': \"y.mp3\",\n      'KeyU': \"d4.mp3\",\n      'KeyI': \"d5.mp3\",\n      'KeyO': \"d6.mp3\",\n      'KeyP': \"d7.mp3\",\n      'KeyA': \"8.mp3\",\n      'KeyS': \"9.mp3\",\n      'KeyD': \"10.mp3\",\n      'KeyF': \"11.mp3\",\n      'KeyG': \"g.mp3\",\n      'KeyH': \"h.mp3\",\n      'KeyJ': \"d8.mp3\",\n      'KeyK': \"d9.mp3\",\n      'KeyL': \"d10.mp3\",\n      'Semicolon': \"d11.mp3\",\n      'KeyZ': \"12.mp3\",\n      'KeyX': \"13.mp3\",\n      'KeyC': \"14.mp3\",\n      'KeyV': \"15.mp3\",\n      'KeyB': \"b.mp3\",\n      'KeyN': \"n.mp3\",\n      'KeyM': \"d12.mp3\",\n      'Comma': \"d13.mp3\",\n      'Period': \"d14.mp3\",\n      'Slash': \"d15.mp3\",\n    },\n    \"3\": {\n      'Digit1': \"c12.mp3\",\n      'Digit2': \"1.mp3\",\n      'Digit3': \"2.mp3\",\n      'Digit4': \"3.mp3\",\n      'Digit5': \"5.mp3\",\n      'Digit6': \"6.mp3\",\n      'Digit7': \"d0.mp3\",\n      'Digit8': \"d1.mp3\",\n      'Digit9': \"d2.mp3\",\n      'Digit0': \"d3.mp3\",\n      'KeyQ': \"4.mp3\",\n      'KeyW': \"5.mp3\",\n      'KeyE': \"6.mp3\",\n      'KeyR': \"7.mp3\",\n      'KeyT': \"t.mp3\",\n      'KeyY': \"y.mp3\",\n      'KeyU': \"d4.mp3\",\n      'KeyI': \"d5.mp3\",\n      'KeyO': \"d6.mp3\",\n      'KeyP': \"d7.mp3\",\n      'KeyA': \"8.mp3\",\n      'KeyS': \"9.mp3\",\n      'KeyD': \"10.mp3\",\n      'KeyF': \"11.mp3\",\n      'KeyG': \"g.mp3\",\n      'KeyH': \"h.mp3\",\n      'KeyJ': \"d8.mp3\",\n      'KeyK': \"d9.mp3\",\n      'KeyL': \"d10.mp3\",\n      'Semicolon': \"d11.mp3\",\n      'KeyZ': \"12.mp3\",\n      'KeyX': \"13.mp3\",\n      'KeyC': \"14.mp3\",\n      'KeyV': \"15.mp3\",\n      'KeyB': \"b.mp3\",\n      'KeyN': \"n.mp3\",\n      'KeyM': \"d12.mp3\",\n      'Comma': \"d13.mp3\",\n      'Period': \"d14.mp3\",\n      'Slash': \"d15.mp3\",\n    },\n    \"4\": {\n      'Digit1': \"c12.mp3\",\n      'Digit2': \"1.mp3\",\n      'Digit3': \"2.mp3\",\n      'Digit4': \"3.mp3\",\n      'Digit5': \"5.mp3\",\n      'Digit6': \"6.mp3\",\n      'Digit7': \"d0.mp3\",\n      'Digit8': \"d1.mp3\",\n      'Digit9': \"d2.mp3\",\n      'Digit0': \"d3.mp3\",\n      'KeyQ': \"4.mp3\",\n      'KeyW': \"5.mp3\",\n      'KeyE': \"6.mp3\",\n      'KeyR': \"7.mp3\",\n      'KeyT': \"t.mp3\",\n      'KeyY': \"y.mp3\",\n      'KeyU': \"d4.mp3\",\n      'KeyI': \"d5.mp3\",\n      'KeyO': \"d6.mp3\",\n      'KeyP': \"d7.mp3\",\n      'KeyA': \"8.mp3\",\n      'KeyS': \"9.mp3\",\n      'KeyD': \"10.mp3\",\n      'KeyF': \"11.mp3\",\n      'KeyG': \"g.mp3\",\n      'KeyH': \"h.mp3\",\n      'KeyJ': \"d8.mp3\",\n      'KeyK': \"d9.mp3\",\n      'KeyL': \"d10.mp3\",\n      'Semicolon': \"d11.mp3\",\n      'KeyZ': \"12.mp3\",\n      'KeyX': \"13.mp3\",\n      'KeyC': \"14.mp3\",\n      'KeyV': \"15.mp3\",\n      'KeyB': \"b.mp3\",\n      'KeyN': \"n.mp3\",\n      'KeyM': \"d12.mp3\",\n      'Comma': \"d13.mp3\",\n      'Period': \"d14.mp3\",\n      'Slash': \"d15.mp3\",\n    }\n  }\n\n  const setKeyCodes = () => {\n    keyToCode.set(\"ArrowLeft\", \"ArrowLeft\")\n    keyToCode.set(\"ArrowUp\", \"ArrowUp\")\n    keyToCode.set(\"ArrowRight\", \"ArrowRight\")\n    keyToCode.set(\"ArrowDown\", \"ArrowDown\")\n    keyToCode.set(\"Q\", \"KeyQ\")\n    keyToCode.set(\"W\", \"KeyW\")\n    keyToCode.set(\"E\", \"KeyE\")\n    keyToCode.set(\"R\", \"KeyR\")\n    keyToCode.set(\"T\", \"KeyT\")\n    keyToCode.set(\"Y\", \"KeyY\")\n    keyToCode.set(\"U\", \"KeyU\")\n    keyToCode.set(\"I\", \"KeyI\")\n    keyToCode.set(\"O\", \"KeyO\")\n    keyToCode.set(\"P\", \"KeyP\")\n    keyToCode.set(\"A\", \"KeyA\")\n    keyToCode.set(\"S\", \"KeyS\")\n    keyToCode.set(\"D\", \"KeyD\")\n    keyToCode.set(\"F\", \"KeyF\")\n    keyToCode.set(\"G\", \"KeyG\")\n    keyToCode.set(\"H\", \"KeyH\")\n    keyToCode.set(\"J\", \"KeyJ\")\n    keyToCode.set(\"K\", \"KeyK\")\n    keyToCode.set(\"L\", \"KeyL\")\n    keyToCode.set(\"Z\", \"KeyZ\")\n    keyToCode.set(\"X\", \"KeyX\")\n    keyToCode.set(\"C\", \"KeyC\")\n    keyToCode.set(\"V\", \"KeyV\")\n    keyToCode.set(\"B\", \"KeyB\")\n    keyToCode.set(\"N\", \"KeyN\")\n    keyToCode.set(\"M\", \"KeyM\")\n    keyToCode.set(\"1\", \"Digit1\")\n    keyToCode.set(\"2\", \"Digit2\")\n    keyToCode.set(\"3\", \"Digit3\")\n    keyToCode.set(\"4\", \"Digit4\")\n    keyToCode.set(\"5\", \"Digit5\")\n    keyToCode.set(\"6\", \"Digit6\")\n    keyToCode.set(\"7\", \"Digit7\")\n    keyToCode.set(\"8\", \"Digit8\")\n    keyToCode.set(\"9\", \"Digit9\")\n    keyToCode.set(\"0\", \"Digit0\")\n    keyToCode.set(\",\", \"Comma\")\n    keyToCode.set(\".\", \"Period\")\n    keyToCode.set(\"/\", \"Slash\")\n    keyToCode.set(\";\", \"Semicolon\")\n  }\n  setKeyCodes()\n  let keys = [\n    List([\n      { note: '1', code: 'Digit1', sound: sounds[chain][\"Digit1\"]},\n      { note: '2', code: 'Digit2', sound: sounds[chain][\"Digit2\"]},\n      { note: '3', code: 'Digit3', sound: sounds[chain][\"Digit3\"]},\n      { note: '4', code: 'Digit4', sound: sounds[chain][\"Digit4\"]},\n      { note: '5', code: 'Digit5', sound: sounds[chain][\"Digit5\"]},\n      { note: '6', code: 'Digit6', sound: sounds[chain][\"Digit6\"]},\n      { note: '7', code: 'Digit7', sound: sounds[chain][\"Digit7\"]},\n      { note: '8', code: 'Digit8', sound: sounds[chain][\"Digit8\"]},\n      { note: '9', code: 'Digit9', sound: sounds[chain][\"Digit9\"]},\n      { note: '0', code: 'Digit0', sound: sounds[chain][\"Digit0\"]},\n    ]),\n    List([\n      { note: 'Q', code: 'KeyQ', sound: sounds[chain][\"KeyQ\"]},\n      { note: 'W', code: 'KeyW', sound: sounds[chain][\"KeyW\"]},\n      { note: 'E', code: 'KeyE', sound: sounds[chain][\"KeyE\"]},\n      { note: 'R', code: 'KeyR', sound: sounds[chain][\"KeyR\"]},\n      { note: 'T', code: 'KeyT', sound: sounds[chain][\"KeyT\"]},\n      { note: 'Y', code: 'KeyY', sound: sounds[chain][\"KeyY\"]},\n      { note: 'U', code: 'KeyU', sound: sounds[chain][\"KeyU\"]},\n      { note: 'I', code: 'KeyI', sound: sounds[chain][\"KeyI\"]},\n      { note: 'O', code: 'KeyO', sound: sounds[chain][\"KeyO\"]},\n      { note: 'P', code: 'KeyP', sound: sounds[chain][\"KeyP\"]},\n    ]), List([\n      { note: 'A', code: 'KeyA', sound: sounds[chain][\"KeyA\"]},\n      { note: 'S', code: 'KeyS', sound: sounds[chain][\"KeyS\"]},\n      { note: 'D', code: 'KeyD', sound: sounds[chain][\"KeyD\"]},\n      { note: 'F', code: 'KeyF', sound: sounds[chain][\"KeyF\"]},\n      { note: 'G', code: 'KeyG', sound: sounds[chain][\"KeyG\"]},\n      { note: 'H', code: 'KeyH', sound: sounds[chain][\"KeyH\"]},\n      { note: 'J', code: 'KeyJ', sound: sounds[chain][\"KeyJ\"]},\n      { note: 'K', code: 'KeyK', sound: sounds[chain][\"KeyK\"]},\n      { note: 'L', code: 'KeyL', sound: sounds[chain][\"KeyL\"]},\n      { note: ';', code: 'Semicolon', sound: sounds[chain][\"Semicolon\"]},\n    ]), List([\n      { note: 'Z', code: 'KeyZ', sound: sounds[chain][\"KeyZ\"]},\n      { note: 'X', code: 'KeyX', sound: sounds[chain][\"KeyX\"]},\n      { note: 'C', code: 'KeyC', sound: sounds[chain][\"KeyC\"]},\n      { note: 'V', code: 'KeyV', sound: sounds[chain][\"KeyV\"]},\n      { note: 'B', code: 'KeyB', sound: sounds[chain][\"KeyB\"]},\n      { note: 'N', code: 'KeyN', sound: sounds[chain][\"KeyN\"]},\n      { note: 'M', code: 'KeyM', sound: sounds[chain][\"KeyM\"]},\n      { note: ',', code: 'Comma', sound: sounds[chain][\"Comma\"]},\n      { note: '.', code: 'Period', sound: sounds[chain][\"Period\"]},\n      { note: '/', code: 'Slash', sound: sounds[chain][\"Slash\"]},\n    ])]\n  const themeColor = {\n    \"1\": \"bg-yellow\",\n    \"2\": \"bg-red\",\n    \"3\": \"bg-blue\",\n    \"4\": \"bg-green\",\n  }\n  useEffect(() => {\n    window.addEventListener('keydown', keyDownEventHandler)\n    window.addEventListener('keyup', keyUpEventHandler);\n\n    return () => {\n      window.removeEventListener('keydown', keyDownEventHandler);\n      window.removeEventListener('keyup', keyUpEventHandler);\n    }\n  });\n\n  const keyDownEventHandler = (event) => {\n    console.log(\"Clicked\", event.code)\n    console.log(\"Suggested\", keyToCode.get(sequence[activeIndex]))\n    if (event.code === \"ArrowUp\") setChain(\"1\")\n    if (event.code === \"ArrowLeft\") setChain(\"2\")\n    if (event.code === \"ArrowDown\") setChain(\"3\")\n    if (event.code === \"ArrowRight\") setChain(\"4\")\n    if (event.code === keyToCode.get(sequence[activeIndex])) setActive(activeIndex+1)\n  }\n\n  const keyUpEventHandler = (event) => {\n    if (event.code === \"ArrowUp\") setChain(\"1\")\n    if (event.code === \"ArrowLeft\") setChain(\"2\")\n    if (event.code === \"ArrowDown\") setChain(\"3\")\n    if (event.code === \"ArrowRight\") setChain(\"4\")\n  }\n  const arrowBaseClass = \"flex w3 h3 ba ml3 items-center justify-center\"\n  return (\n    <div className=\"flex flex-column\">\n      <div className=\"flex pv2 bg-black\">\n        <div className=\"flex flex-column\">\n          {\n            keys.map( (list, id) => {\n              return <div key={id} className=\"flex flex-row pv2 bg-black\">\n                { \n                  list.map( (key, idx) => {\n                    return (\n                      <LaunchPadKey themeColor={themeColor[chain]}key={idx} note={key.note} keyCode={key.code} soundPath={songPath + chainPath + key.sound}/>\n                    )})\n                }\n              </div>\n            })\n          }\n        </div>\n        <div className='white pa5 flex items-center'>\n          <h1 className=\"ttu tracked b lh-title\">\n            {sequence[activeIndex]}\n          </h1>\n          <p>\n            {\n              sequence.slice(activeIndex + 1, activeIndex+30)\n            }\n          </p>\n        </div>\n      </div>\n      <div className=\"pv3 ba b--black flex bt-0\">\n        <div className={chain === \"1\" ? arrowBaseClass + \" \" + themeColor[\"1\"] : arrowBaseClass}>\n          <code>{\"^\"}</code>\n        </div>\n        <div className={chain === \"2\" ? arrowBaseClass + \" \" + themeColor[\"2\"] : arrowBaseClass}>\n          <code>{\"<\"}</code>\n        </div>\n        <div className={chain === \"3\" ? arrowBaseClass + \" \" + themeColor[\"3\"] : arrowBaseClass}>\n          <code>{\"V\"}</code>\n        </div>\n        <div className={chain === \"4\" ? arrowBaseClass + \" \" + themeColor[\"4\"] : arrowBaseClass}>\n          <code>{\">\"}</code>\n        </div>\n        <div className=\"flex justify-center items-center h3 ph3\"> Active Chain: {chain}</div>\n        <div onClick={() => setSong(\"kyoto\")} className={song === \"kyoto\" ? \"flex w4 h3 ba ml3 items-center justify-center bg-red pointer\" : \"flex w4 h3 ba ml3 items-center justify-center pointer\"}>\n          <code>{\"Kyoto\"}</code>\n        </div>\n        <div onClick={() => setSong(\"animals\")} className={song === \"animals\" ? \"flex w4 h3 ba ml3 items-center justify-center bg-red pointer\" : \"flex w4 h3 ba ml3 items-center justify-center pointer\"}>\n          <code>{\"Animals\"}</code>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport const GuitarInstrument = new Instrument('Launchpad', Launchpad);\n","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n\nexport const WaveformVisualizer = new Visualizer(\n  'Waveform',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 0, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.noFill();\n\n    const values = analyzer.getValue();\n    p5.beginShape();\n    for (let i = 0; i < values.length; i++) {\n      const amplitude = values[i] as number;\n      const x = p5.map(i, 0, values.length - 1, 0, width);\n      const y = height / 2 + amplitude * height;\n      // Place vertex\n      p5.vertex(x, y);\n    }\n    p5.endShape();\n  },\n);\n","// 3rd party library imports;\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n// import { FFT } from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n// empty particles array\nconst particles: Particle[] = [];\nlet isPressed = false;\n\nexport const StarVisualizer = new Visualizer(\n  'Star',\n  (p5: P5, analyzer: Tone.Analyser) => {\n\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 100, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.fill(255, 0, 255);\n    p5.angleMode('degrees');\n    // p5.noFill();\n\n    const values = analyzer.getValue();\n    p5.translate(width/2.5,height/2);\n    p5.beginShape();\n    for (let i = 0; i < values.length; i+=2.5){\n      const index = Math.floor(p5.map(i,0,180,0,values.length-1));\n      const amplitude = values[index] as number;\n      const r = p5.map(amplitude,-1,1,50,250);\n      const x = r * Math.sin(i);\n      const y = r * Math.cos(i);  \n      p5.vertex(x,y);\n    }\n    p5.endShape();\n\n    // Creates the particles that are spinning around the star shape\n    for(let i = 0; i < 100; i+=1){\n      const index = Math.floor(p5.map(i,0,180,0,values.length-1));\n      const amplitude = values[index] as number;\n      const pos = P5.Vector.random2D().mult(300); \n      const x = p5.map(amplitude,-1,1,pos.x,5);\n      const y = p5.map(amplitude,-1,1,pos.y,10);\n      // const w = p5.random(3,15);\n      p5.noStroke();\n      p5.fill(255, 0, 255);\n      p5.ellipse(x*2.5, y-10, x/4);\n    }\n\n    // check if user click the button to create or delete particles\n    if(isPressed){\n      particles.push(new Particle(p5));\n      particles.forEach(p => p.move());\n    }\n    else\n      particles.splice(0,particles.length);\n\n    createButton(p5); \n    // particles.push(new Particle(p5));\n    // particles.forEach(p => {p.move();});\n    // particles.pop();\n  },\n);\n\nconst createButton = (p5: P5) => {\n  const checkisPressed = () => {\n    if(!isPressed) \n      isPressed = true;\n    else\n      isPressed = false;\n  };\n  const button = p5.createButton('Particles'); \n  button.position(285,450); \n  button.style('font-size','16px');\n  button.style('background-color', p5.color(255,0,255));\n  button.style('border-radius','8px');\n  button.style('cursor','pointer');\n  // button.style('border','2px solid #555555');\n  button.style('border','none');\n  button.style('display','inline-block');\n  button.style('margin','4px 2px');\n  button.style('color','white');\n  button.style('padding','12px 28px');\n  button.mousePressed(checkisPressed);\n}\n\n// Create particle object. Each particle will be shown every frame\nexport class Particle{\n  // Vector - class to describe 2d or 3d vectors\n  // random2D() - Makes a new 2D unit vector from a random angle\n  // mult() - Multiplies the vector by a scalar \n  // const vector = P5.Vector.random2D().mult(250);\n  pos: P5.Vector;\n  p5: P5;\n  vel: P5.Vector; acc: P5.Vector; w :number;\n  x: number; y: number; xSpeed: number; ySpeed: number; width: number; height: number;\n  alpha: number;\n  //constructor\n  constructor(p5: P5){\n    this.p5 = p5;\n    this.pos = P5.Vector.random2D().mult(170);\n    this.vel = this.p5.createVector(0,0);\n    this.acc = this.pos.copy().mult(this.p5.random(0.0001,0.00001));\n    this.w = this.p5.random(3,8);\n\n    this.width = window.innerHeight; this.height = window.innerHeight/2;\n    this.x = 2 * Math.floor(this.p5.random() * this.width);\n    this.y = Math.floor(this.p5.random() * this.height)/2;\n    this.xSpeed = Math.random() * 0.9;\n    this.ySpeed = Math.random() * 0.9;\n\n    this.alpha = 255;\n  }\n\n  show = () => {\n    this.p5.noStroke();\n    this.p5.fill(255);\n    this.p5.ellipse(this.pos.x,this.pos.y, this.w);\n  };\n  update = () => {\n    this.vel.add(this.acc);\n    this.pos.add(this.vel);\n  };  \n  move = () => {\n    this.x += this.xSpeed;\n    this.y += this.ySpeed;\n\n    if (this.x <= 0) this.xSpeed *= -1;\n    if (this.x > this.width) this.xSpeed *= -1;\n    if (this.y <= 0) this.ySpeed *= -1;\n    if (this.y > this.height) this.ySpeed *= -1;\n\n    this.p5.noStroke(); \n    this.p5.fill(255);\n    this.p5.ellipse(this.x/2,this.y, this.w);\n    this.p5.ellipse(-this.x/2,-this.y,this.w);\n    this.p5.ellipse(-this.x/2,this.y,this.w); \n    this.p5.ellipse(this.x/2,-this.y,this.w);     \n  }\n  reset = () => {\n    return this.alpha < 0;\n  }\n};","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n\nexport const Circle = new Visualizer(\n  'Colored O Visualizer',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 0, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.noFill();\n    const colors :string[] = [\"green\", \"red\", \"blue\", \"white\", \"gray\"]\n    const values = analyzer.getValue();\n    p5.beginShape();\n    // Change Colors based on amplitude\n    for (let i = 0; i < values.length; i++) {\n      const angle = i * 360 / values.length\n      const radius = 200\n      const centerY = height / 2\n      const centerX = width / 2 - radius / 2\n      const len = 100 * (values[i] as number)\n\n      const x1 = Math.cos(angle) * (radius - (len/2) * (i % 5 + 1)) + centerX\n      const x2 = Math.cos(angle) * (radius + (len/2) * (i % 5 + 1)) + centerX\n      const y1 = Math.sin(angle) * (radius - (len/2) * (i % 5 + 1)) + centerY\n      const y2 = Math.sin(angle) * (radius + (len/2) * (i % 5 + 1)) + centerY\n\n      p5.stroke(colors[i % 5]);\n      p5.line(x1, y1, x2, y2)\n      // p5.vertex(X, Y);\n    }\n    p5.endShape();\n  },\n);\n","// 3rd party library imports\nimport P5 from 'p5';\nimport * as Tone from 'tone';\n\n// project imports\nimport { Visualizer } from '../Visualizers';\n\n\nexport const Smiley = new Visualizer(\n  'Smiley',\n  (p5: P5, analyzer: Tone.Analyser) => {\n    const width = window.innerWidth;\n    const height = window.innerHeight / 2;\n    const dim = Math.min(width, height);\n\n    p5.background(0, 0, 0, 255);\n\n    p5.strokeWeight(dim * 0.01);\n    p5.stroke(255, 255, 255, 255);\n    p5.noFill();\n    const values = analyzer.getValue();\n\n    var maxAmp = 0;\n    for (let i = 0; i < values.length; i++) {\n        if (values[i] as number > maxAmp) {\n            maxAmp = values[i] as number;\n        }\n    }\n\n    p5.beginShape();\n    if (maxAmp > 0)\n        p5.arc(width/2,height/2,width/(maxAmp*20),height/2,0,3.14);\n    else {\n        p5.arc(width/2,height/2,width*100,height/2,0,3.14);\n    }\n    p5.endShape();\n\n    p5.beginShape();\n    p5.ellipse(width/2+70,height/2.5,width/5 *maxAmp);\n    p5.ellipse(width/2-70,height/2.5,width/5 *maxAmp);\n    p5.endShape();\n\n\n    //p5.beginShape();\n    var ampMod:number = 0;\n    for (let i = 0; i < values.length; i++) {\n        const center:number = width/2 - 300;\n\n        var amplitude:number = (values[i] as number);\n        var x:number = p5.map(i, 0, values.length - 1, 0, width);\n        var arcSeg:number = p5.map(i, 0, values.length - 1, 0, 3.14);\n\n        //var arcSegNext:number = p5.map(i + 1, 0, values.length - 1, 0, 3.14);\n        p5.beginShape();\n        p5.strokeWeight(dim * 0.01 * amplitude*50);\n        p5.arc(width/2,height/2,width/(maxAmp*20),height/2,arcSeg,arcSeg+0.001);\n        p5.endShape();\n        \n\n        \n        if (ampMod < center) {\n            ampMod += 1;\n            \n        }\n        else {\n            ampMod -= 1;\n        }\n        amplitude *= (ampMod/center)*20;\n\n        const y = height / 2 + amplitude * height;\n        // Place vertex\n        //p5.vertex(x, y);\n    }\n    //p5.endShape();\n  },\n);\n","/** \n * - Citation for Grid.tsx\n  - Ruben Leija / Linguincode.com\n  - November 23, 2021\n  - Grid.tsx\n  - v1.0\n  - source code\n  - https://linguinecode.com/post/responsive-grid-layout-react-component#source-code\n */\nimport * as React from \"react\";\n\nimport styles from \"./Grid.module.css\";\n\ntype GridItemsAlignment =\n  | \"flex-start\"\n  | \"center\"\n  | \"flex-end\"\n  | \"stretch\"\n  | \"baseline\";\n\ntype GridJustify =\n  | \"flex-start\"\n  | \"center\"\n  | \"flex-end\"\n  | \"space-between\"\n  | \"space-around\"\n  | \"space-evenly\";\n\ntype GridSizes = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\n\ninterface GridProps {\n  alignItems?: GridItemsAlignment;\n  column?: boolean;\n  expanded?: boolean;\n  justify?: GridJustify;\n  lg?: GridSizes;\n  md?: GridSizes;\n  row?: boolean;\n  sm?: GridSizes;\n}\n\nconst Grid: React.SFC<GridProps> = (props) => {\n  const {\n    alignItems,\n    children,\n    column,\n    expanded,\n    justify,\n    lg,\n    md,\n    row,\n    sm\n  } = props;\n\n  const isRow: boolean = row || !column;\n\n  const classes: string =\n    (!isRow ? styles.column : styles.row) +\n    // Row styling\n    (isRow && expanded ? ` ${styles.expanded}` : \"\") +\n    (isRow && justify ? ` ${styles[justify]}` : \"\") +\n    (isRow && alignItems ? ` ${styles[\"align-\" + alignItems]}` : \"\") +\n    // Column styling\n    (!isRow && sm ? ` ${styles[\"sm-\" + sm]}` : \"\") +\n    (!isRow && md ? ` ${styles[\"md-\" + md]}` : \"\") +\n    (!isRow && lg ? ` ${styles[\"lg-\" + lg]}` : \"\");\n\n  return <div className={classes}>{children}</div>;\n};\n\nexport default Grid;","import { io as newSocket, Socket as SocketIO } from 'socket.io-client';\n\nconst SOCKET_URL = 'ws://localhost:3001';\n\nconst SOCKET_OPTS = {\n  transports: ['websocket'],\n  path: '/ws',\n  autoConnect: true,\n  reconnection: true,\n  timeout: 10000,\n};\n\nlet idCounter = 1;\n\nexport async function send(\n  socket: Socket,\n  name: string,\n  msg: any,\n): Promise<any> {\n  const _id = idCounter++;\n\n  return new Promise((resolve, reject) => {\n    socket.once(`${name}.${_id}`, resp => {\n      const { error, success } = resp;\n      if (success) {\n        resolve(success);\n      } else {\n        reject(error);\n      }\n    });\n    socket.emit(name, { _id, ...msg });\n  });\n}\n\n\nexport type Socket = SocketIO;\n\nexport function initializeSocket(\n  onConnect: (socket: Socket) => void,\n  onDisconnect: () => void,\n): Socket {\n  const socket = newSocket(SOCKET_URL, SOCKET_OPTS);\n\n  socket.on('connect', () => onConnect(socket));\n  socket.on('disconnect', onDisconnect);\n\n  return socket;\n}\n","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { Map, List, Range } from 'immutable';\nimport { ChangeEventHandler, createRef, useEffect, useRef, useState } from 'react';\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport Grid from './Grid';\nimport './alfonsoduartesarabia.css';\nimport { Socket } from 'socket.io-client';\nimport { send } from '../Socket';\nimport { DispatchAction } from '../Reducer';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Drum Machine.\n * From Wikipedia:\n * \"A drum machine is an electronic musical instrument that creates percussion sounds, drum beats, and patterns\"\n ** ------------------------------------------------------------------------ */\ninterface DrumPadProps{\n  id: string;\n  note: string;\n  synth?: Tone.Synth;\n  sampler?: Tone.Sampler;\n  volume: number;\n  recorder: Tone.Recorder;\n  socket: Socket;\n  dispatch: any;\n}  \n\n/** Drum Machine \n**/\nfunction DrumMachine({ state, synth, setSynth, dispatch }: InstrumentProps ): JSX.Element {\n  const [volume,setVolume] = useState<number>(5);\n  const recorder = new Tone.Recorder();\n  const socket = state.get('socket');\n  \n  function changeVolume(e: React.ChangeEvent<HTMLInputElement>) {\n    setVolume(e.target.value as unknown as number);\n    // sampler?.disconnect();\n  }\n  \n  return (\n    <div className=\"pv4\">\n        <div className=\"relative h5 w-200 ml4\">\n          <CreateGrid \n          id={''} note={''} volume={volume} recorder={recorder} socket={socket} dispatch={dispatch}\n          /> \n          {/* {keys.map(k => {\n          return  <DrumPadButton id={k.id} note={k.note} synth={synth} />\n          })} */}\n        </div> \n        <div className='volume-bar'> \n        <label>\n          <input \n            // className='volume-bar'\n            type='range'  \n            min={-60}\n            max={15}\n            value={volume}\n            onChange={changeVolume}\n          />\n          Volume\n          </label>\n        </div>\n    </div>\n  );\n}\n\n// Connect to database\nasync function saveNotesToDB(notes: string[], socket: Socket, dispatch: any){\n  const response = await send(socket, 'save_song', { notes });\n  dispatch(new DispatchAction('SET_SONGS', { songs: response }));\n\n  /* \n    Lets figure out what response will be after \n  */\n}\n\n// Hard coding the grid with buttons\nexport function CreateGrid({ sampler, volume, recorder, socket, dispatch }: DrumPadProps): JSX.Element{\n\n  sampler = new Tone.Sampler({\n    urls: {\n      A0: 'sounds/Bass-Drum-1.wav',\n      B0: 'sounds/Boom-Kick.wav',\n      C0: 'sounds/Closed-Hi-Hat-2.wav',\n      A4: 'sounds/Dry-Kick.wav',\n      B5: 'sounds/Electric-Guitar-C4.wav',\n      C6: 'sounds/English-Horn-C5.wav',\n      D7: 'sounds/Hi-Bongo.wav',\n      E1: 'sounds/Hi-Hat-Open-Hit-B1.mp3',\n      F2: 'sounds/Hip-Hop-Snare-1.wav',\n    }, \n    release: 10,\n    baseUrl: 'http://localhost:3000/'\n  }).toDestination();\n\n  const [isRec,setIsRec] = useState(false);\n  const [audioUrl,setAudioURL] = useState('');\n  const notes: string[] = [];\n  sampler.volume.value = volume;\n  sampler?.connect(recorder);\n  let url: string = '';\n  \n  function saveNotes(note: string){\n    if(isRec){\n      notes.push(note);\n    }\n  }\n  function startRecording(){\n    setIsRec(true);\n    recorder.start();\n  }\n  function stopRecording(){\n    setIsRec(false);\n    saveNotesToDB(notes, socket, dispatch);\n    setTimeout(async () => {\n      const recording = await recorder.stop();\n      url = URL.createObjectURL(recording);\n      setAudioURL(url);\n    },1000);\n    notes.splice(0,notes.length);\n  }\n  function downloadRecording(){\n    if(audioUrl.length > 0){\n      const anchor = document.createElement(\"a\");\n      anchor.download = \"recording.webm\";\n      anchor.href = audioUrl;\n      anchor.click();\n      setAudioURL('');\n    }\n  }\n\n  return (\n    <div>\n    <Grid row={true} >\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap' \n        onMouseDown={() => sampler?.triggerAttack(`A0`) && saveNotes('A0')}\n        onMouseLeave={() => sampler?.triggerRelease('')}\n      >Bass Drum</button>\n      </Grid>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`B0`) && saveNotes('B0')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Boom Kick</button>\n      </Grid>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`C0`) && saveNotes('C0')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Closed HH</button>\n      </Grid>\n    </Grid>\n\n    <Grid row={true}>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`A4`) && saveNotes('A4')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Dry Kicks</button>\n      </Grid>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`B5`) && saveNotes('B5')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Electric Guitar</button>\n      </Grid>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`C6`) && saveNotes('C6')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >English Horn</button>\n      </Grid>\n    </Grid>\n\n    <Grid row={true}>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`D7`) && saveNotes('D7')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Hi Bongo</button>\n      </Grid>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`E1`) && saveNotes('E1')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Open HH</button>\n      </Grid>\n      <Grid column={true} sm={1} md={1}>\n      <button id='button-wrap' className='button-wrap'\n      onMouseDown={() => sampler?.triggerAttack(`F2`) && saveNotes('F2')}\n      onMouseLeave={() => sampler?.triggerRelease('')}\n      >Hip Hop Snare</button>\n      </Grid>\n    </Grid>\n\n      <div className='recorder'>\n          <button className={`record-btn ${isRec ? 'bg-dark-red white' : ''}`} disabled={isRec} onClick={startRecording}>\n          {/* <BsFillStopFill /> */}\n          <div className='button-name'>record</div>\n          </button>\n          <button className={`stop-btn ${isRec ? '' : 'bg-dark-red white'}`} disabled={!isRec} onClick={stopRecording}>\n          <div className='button-name'>stop</div>\n          </button>\n          <button className='add-btn'onClick={downloadRecording}>\n          <div className='button-name'>Download</div>\n          </button>\n          {isRec && <p style={{color:'red'}}>You are recording</p>}\n          <div className='audio'>\n            <audio controls src={audioUrl}>\n            </audio>\n          </div>\n      </div>\n\n    </div>\n  );\n}\n\n// create drumpad buttons - NOT USED\nexport function DrumPadButton({id,note, sampler}: DrumPadProps): JSX.Element {\n  sampler = new Tone.Sampler({\n    urls: {\n      A0: 'sounds/Bass-Drum-1.wav',\n      B0: 'sounds/Boom-Kick.wav',\n      C0: 'sounds/Closed-Hi-Hat-2.wav',\n      A4: 'sounds/Dry-Kick.wav',\n      B5: 'sounds/Electric-Guitar-C4.wav',\n      C6: 'sounds/English-Horn-C5.wav',\n      D7: 'sounds/Hi-Bongo.wav',\n      E1: 'sounds/Hi-Hat-Open-Hit-B1.mp3',\n      F2: 'sounds/Hip-Hop-Snare-1.wav',\n    }, \n    release: 10,\n    baseUrl: 'http://localhost:3000/'\n  }).toDestination();\n  // Tone.Transport.start();\n\n  return (\n    // <Grid row={true}>\n    //   <Grid column={true} sm={9} md={4}>\n    //     <h1>{id}</h1>\n    //   </Grid>\n    // </Grid>\n\n    <button id='button-wrap' style={{\n      border: '2px solid palevioletred',\n      color: 'palevioletred',\n      margin: '0 0.5em',\n      padding: '0.25em 0.5em',\n      display: 'flex',\n    }} \n    onMouseDown={() => sampler?.triggerAttack(`${note}`)}\n    onMouseLeave={() => sampler?.triggerRelease('')}>\n       {id}\n    </button>\n  )\n}\n\nexport const DrumMachineInstrument = new Instrument('Drum Machine', DrumMachine);","// 3rd party library imports\nimport * as Tone from 'tone';\nimport classNames from 'classnames';\nimport { List, Range } from 'immutable';\nimport React, {useEffect, useState} from 'react';\n\n//image import\nimport flutePic from './flute.png';\n\n\n// project imports\nimport { Instrument, InstrumentProps } from '../Instruments';\nimport { Console } from 'console';\nimport { Notebook16 } from '@carbon/icons-react';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of components for Piano.\n ** ------------------------------------------------------------------------ */\n\ninterface PianoKeyProps {\n  note: string; // C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B\n  duration?: string;\n  synth?: Tone.Synth; // Contains library code for making sound\n  minor?: boolean; // True if minor key, false if major key\n  octave: number;\n  index: number; // octave + index together give a location for the piano key\n  chord: (string | number[])[];\n}\n\nconst notes = ['C2','Db2','D2','Eb2','E2','F2','Gb2','G2','Ab2','A2','Bb2','B2',\n'C3','Db3','D3','Eb3','E3','F3','Gb3','G3','Ab3','A3','Bb3','B3',\n'C4','Db4','D4','Eb4','E4','F4','Gb4','G4','Ab4','A4','Bb4','B4',\n'C5','Db5','D5','Eb5','E5','F5','Gb5','G5','Ab5','A5','Bb5','B5',\n'C6','Db6','D6','Eb6','E6','F6','Gb6','G6','Ab6','A6','Bb6','B6'];\n\nexport function PianoKey({\n  note,\n  synth,\n  minor,\n  index,\n  chord,\n}: PianoKeyProps): JSX.Element {\n  /**\n   * This React component corresponds to either a major or minor key in the piano.\n   * See `PianoKeyWithoutJSX` for the React component without JSX.\n   */\n\n  /**\n   * \n   * @param initialNote string note pressed, such as C2, Gb6 etc.\n   * @param chordTones array of numbers cooresponding to interval between initalNote and chord tone\n   * @param synth Tone.synth\n   * @param timeInterval how far apart each note is\n   */\n  const playChord = (initialNote: string, chordTones: number[], synth: Tone.Synth<Tone.SynthOptions> | undefined, timeInterval: number) => {\n    var chord:string[] = [notes[notes.indexOf(initialNote)]];\n    chordTones.forEach(function (chordTone) {\n      if (chordTone + notes.indexOf(initialNote) >= notes.length) {\n        chord.push(notes[notes.indexOf(initialNote)+(chordTone - notes.length + 36)]);\n      }\n      else {\n        chord.push(notes[notes.indexOf(initialNote)+chordTone]);\n      }\n    });\n    var time:number = 0;\n    chord.forEach(function (chordTone) {\n      synth?.triggerAttack(chordTone,\"+\"+time.toString());\n      time += timeInterval;\n      synth?.triggerRelease(\"+\"+time.toString());\n      time += timeInterval;\n    });\n  };\n\n  return (\n    // Observations:\n    // 1. The JSX refers to the HTML-looking syntax within TypeScript.\n    // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\n    // 3. The curly braces `{` and `}` should remind you of string interpolation.\n    <div\n      onMouseDown={() => {\n        if (chord[0] == 'None') {\n          synth?.triggerAttack(`${note}`);\n        }\n        else {\n          playChord(`${note}`,chord[1] as number[],synth,0.2);\n        }\n      }\n      } // Question: what is `onMouseDown`?\n      onMouseUp={() => {\n        if (chord[0] == 'None') {\n          synth?.triggerRelease('+0.25');\n        }\n      } \n        //synth?.triggerRelease('+0.25')\n    } // Question: what is `onMouseUp`?\n      className={classNames('ba pointer absolute dim', {\n        'bg-black black h3': minor, // minor keys are black\n        'black bg-white h4': !minor, // major keys are white\n      })}\n      style={{ \n        // CSS\n        top: 20,\n        left: `${index * 2}rem`,\n        zIndex: minor ? 1 : 0,\n        width: minor ? '1.5rem' : '2rem',\n        marginLeft: minor ? '0.25rem' : 0,\n      }}\n    ></div>\n  );\n}\n\n\nfunction PianoType({ title, onClick, active }: any): JSX.Element {\n\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction ChordType({ title, onClick, active }: any): JSX.Element {\n  return (\n    <div\n      onClick={onClick}\n      className={classNames('dim pointer ph2 pv1 ba mr2 br1 fw7 bw1', {\n        'b--black black': active,\n        'gray b--light-gray': !active,\n      })}\n    >\n      {title}\n    </div>\n  );\n}\n\nfunction Flute({ synth, setSynth }: InstrumentProps): JSX.Element {\n  useEffect(()=>{\n    synth?.disconnect();\n  }, []);\n\n  const [chord,setChord] = useState(['Major',[4,7]]);\n  const [flute,setFlute] = useState('off');\n\n  const basicChords: List<(string | number[])[]> = List([\n    ['None',[]],\n    ['Major',[4,7]],\n    ['Minor',[3,7]],\n    ['Power',[7]],\n    ['Suspended',[5,7]],\n  ]);\n\n  const seventhChords: List<(string | number[])[]> = List([\n    ['major 7',[4,7,11]],\n    ['dominant 7',[4,7,10]],\n    ['minor 7',[3,7,10]],\n    ['Diminished 7',[3,6,9]],\n  ]);\n\n  const keys = List([\n    { note: 'C', idx: 0 },\n    { note: 'Db', idx: 0.5 },\n    { note: 'D', idx: 1 },\n    { note: 'Eb', idx: 1.5 },\n    { note: 'E', idx: 2 },\n    { note: 'F', idx: 3 },\n    { note: 'Gb', idx: 3.5 },\n    { note: 'G', idx: 4 },\n    { note: 'Ab', idx: 4.5 },\n    { note: 'A', idx: 5 },\n    { note: 'Bb', idx: 5.5 },\n    { note: 'B', idx: 6 },\n  ]);\n\n  const setOscillator = () => {\n    if (flute == 'off') {\n\n      setSynth(oldSynth => {\n        oldSynth.disconnect();\n        var newSynth = new Tone.Synth({oscillator:{type:\"sine\"}}).toDestination();\n        newSynth.set(\n          {\n            oscillator: { \n              type: 'sine'\n          },\n            envelope: {\n              attack: .2,\n              attackCurve: \"linear\",\n              decay: 0.1,\n              release: 2,\n              releaseCurve: \"linear\",\n              sustain: 0.8\n            }\n          }\n        )\n\n        const tremolo = new Tone.Tremolo(5, 0.4).toDestination().start();\n        const freeverb = new Tone.Freeverb().toDestination();\n        freeverb.dampening = 1000;\n        newSynth.connect(tremolo);\n        newSynth.connect(freeverb);\n        newSynth.volume.value = -20;\n        setFlute(\"on\");\n        return newSynth;\n      });  \n    }\n    else {\n      setFlute('off');\n      synth.disconnect();\n    }\n  }\n  return (\n    <div className=\"pv4\">\n      <div className=\"relative dib h4 w-100 ml4\">\n        {Range(2, 7).map(octave =>\n          keys.map(key => {\n            const isMinor = key.note.indexOf('b') !== -1;\n            const note = `${key.note}${octave}`;\n            return (\n              <PianoKey\n                key={note} //react key\n                note={note}\n                synth={synth}\n                minor={isMinor}\n                octave={octave}\n                index={(octave - 2) * 7 + key.idx}\n                chord={chord}\n              />\n            );\n          }),\n        )}\n      </div>\n      <div className={'pl4 pt4 flex'}>\n          <PianoType\n          title={'Flute Toggle'}\n          onClick={() => setOscillator()}\n          active={flute == 'on'}\n          />\n      </div>\n      <div className={'flex flex-direction:column'}>\n        <div className={'pl4 pt4 flex '}>\n            Basic Chords\n        </div>\n        <div className={'pl4 pt4 flex'}>\n          {basicChords.map(c => (\n            <ChordType\n              title={c[0]}\n              onClick={() => setChord(c)}\n              active={chord[0] === c[0]}\n            />\n          ))}\n        </div>\n        <div className={'pl4 pt4 flex'}>\n            Seventh Chords\n        </div>\n        <div className={'pl4 pt4 flex'}>\n          {seventhChords.map(c => (\n            <ChordType\n              title={c[0]}\n              active={chord[0] === c[0]}\n              onClick={() => setChord(c)}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport const FluteInstrument = new Instrument('Flute', Flute);\n","import P5 from 'p5';\r\nimport * as Tone from 'tone';\r\nimport {Visualizer} from '../Visualizers';\r\n\r\nconst particles: Particles[] = [];\r\n\r\nexport const MultiShapeVisualizer = new Visualizer(\r\n    'MultiShape',\r\n    (p5: P5, analyzer: Tone.Analyser) => {\r\n        const width = window.innerWidth;\r\n        const height = window.innerHeight / 2;\r\n        //const dim = Math.min(width, height);\r\n        //p5.loadImage('client/src/img/homepage_bg.jpg');\r\n        p5.angleMode(p5.DEGREES);\r\n        p5.background(0, 0, 0, 255);\r\n        p5.stroke(255);\r\n        p5.strokeWeight(3);\r\n        p5.noFill();\r\n        p5.translate(width / 2, height / 2);\r\n\r\n        const values = analyzer.getValue();\r\n\r\n        //draw circle wave\r\n        for (let j = -1; j <= 1; j += 2) {\r\n            p5.beginShape();\r\n            for (let i = 0; i <= 180; i += 0.5) {\r\n                const index = Math.floor(p5.map(i, 0, 180, 0, values.length - 1));\r\n                const amplitude = values[index] as number;\r\n                const r = p5.map(amplitude, -1, 1, 150, 350);\r\n                const x = r * p5.sin(i) * j;\r\n                const y = r * p5.cos(i);\r\n                // Place vertex\r\n                p5.vertex(x, y);\r\n            }\r\n            p5.endShape();\r\n        }\r\n\r\n\r\n        //draw dynamic shape\r\n        p5.beginShape();\r\n        for (let i = 0; i <= 360; i++) {\r\n            const index = Math.floor(p5.map(i,0,360,0,values.length-1));\r\n            const amplitude = values[index] as number;\r\n\r\n            const r1Min = p5.map(p5.sin(p5.frameCount), -1, 1, 50, 100);\r\n            const r1Max = p5.map(p5.sin(p5.frameCount / 2), -1, 1, 100, 0);\r\n            const r2Min = p5.map(p5.sin(p5.frameCount / 2), -1, 1, 100, 50);\r\n            const r2Max = p5.map(p5.sin(p5.frameCount), -1, 1, 0, 100);\r\n\r\n            const r1 = p5.map(amplitude , -1, 1, r1Min, r1Max);\r\n            const r2 = p5.map(amplitude , -1, 1, r2Min, r2Max);\r\n            const r = r1 + r2;\r\n            const x = r * p5.sin(i);\r\n            const y = r * p5.cos(i);\r\n            // Place vertex\r\n            p5.vertex(x, y);\r\n        }\r\n        p5.endShape();\r\n\r\n        p5.beginShape();\r\n        for (let i = 0; i <= 359; i++) {\r\n            const r1Min = p5.map(p5.sin(p5.frameCount), -1, 1, 50, 100);\r\n            const r1Max = p5.map(p5.sin(p5.frameCount / 2), -1, 1, 100, 0);\r\n            const r2Min = p5.map(p5.sin(p5.frameCount / 2), -1, 1, 100, 50);\r\n            const r2Max = p5.map(p5.sin(p5.frameCount), -1, 1, 0, 100);\r\n\r\n            const r1 = p5.map(p5.sin(i*3) , -1, 1, r1Min, r1Max);\r\n            const r2 = p5.map(p5.sin(i*6) , -1, 1, r2Min, r2Max);\r\n            const r = r1 + r2;\r\n            const x = r * p5.sin(i);\r\n            const y = r * p5.cos(i);\r\n            // Place vertex\r\n            p5.vertex(x, y);\r\n        }\r\n        p5.endShape();\r\n\r\n        //push particles\r\n        //let p =new Particle(p5);\r\n        //particles.push(p);\r\n        /*\r\n        particles.push(new Particle(p5));\r\n\r\n        //get particles\r\n        for(let i = particles.length - 1; i>=0; i--){\r\n            if(!particles[i].edges()) {\r\n                particles[i].update();\r\n                particles[i].show();\r\n            }\r\n            else {\r\n                particles.splice(i,1)\r\n            }\r\n        }\r\n        */\r\n        let p =new Particles(p5);\r\n        particles.push(p);\r\n        for(let i = particles.length - 1; i>=0; i--){\r\n            particles[i].update();\r\n            particles[i].show();\r\n            //delete unseen particles\r\n            while(particles[i].toDeleted()){\r\n                particles.splice(i,1);\r\n            }\r\n        }\r\n    },\r\n);\r\n\r\nexport class Particle {\r\n    pos: P5.Vector;\r\n    p5: P5;\r\n    vel;\r\n    acc;\r\n    w;\r\n    width: number;\r\n    height: number;\r\n\r\n    constructor(p5: P5) {\r\n        this.p5 = p5;\r\n        this.pos = P5.Vector.random2D().mult(250);\r\n        this.vel = this.p5.createVector(0, 0);\r\n        this.acc = this.pos.copy().mult(this.p5.random(0.0001, 0.00001));\r\n        this.w = this.p5.random(3, 5);\r\n        this.width = window.innerHeight;\r\n        this.height = window.innerHeight / 2;\r\n        this.pos.x = 2 * Math.floor(this.p5.random() * this.width);\r\n        this.pos.y = Math.floor(this.p5.random() * this.height)/2;\r\n    }\r\n\r\n    //update particle\r\n    update = () => {\r\n        this.vel.add(this.acc);\r\n        this.pos.add(this.vel);\r\n    };\r\n\r\n    //remove particle no longer exist\r\n    edges = () => {\r\n        if (this.pos.x < -this.width / 2 || this.pos.x > this.width / 2 ||\r\n            this.pos.y < -this.height / 2 || this.pos.y > this.height / 2) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    //show particle\r\n    show = () => {\r\n        this.p5.noStroke();\r\n        this.p5.fill(255);\r\n        this.p5.ellipse(this.pos.x, this.pos.y, this.w);\r\n    };\r\n\r\n}\r\n\r\nclass Particles{\r\n    p5: P5;\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    vx;\r\n    vy;\r\n    alpha;\r\n\r\n    constructor(p5: P5) {\r\n        this.p5 = p5;\r\n        //this.x = 300;\r\n        //this.y = 380;\r\n        this.width = window.innerHeight;\r\n        this.height = window.innerHeight/2;\r\n        this.x = Math.floor(this.p5.random() * this.width);\r\n        this.y = Math.floor(this.p5.random() * this.height);\r\n        this.vx = this.p5.random(-1,1);\r\n        this.vy = this.p5.random(-5,-1);\r\n        this.alpha = 255;\r\n    }\r\n\r\n    show(){\r\n        this.p5.noStroke();\r\n        //this.p5.stroke(255);\r\n        this.p5.fill(255,this.alpha);\r\n        this.p5.ellipse(this.x,this.y,16);\r\n        this.p5.ellipse(-this.x, this.y, 16);\r\n    }\r\n\r\n    update(){\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n        this.alpha -= 5;\r\n    }\r\n\r\n    toDeleted(){\r\n        return this.alpha < 0;\r\n    }\r\n}\r\n","import * as Tone from 'tone';\r\nimport classNames from 'classnames';\r\nimport {List} from 'immutable';\r\nimport {useState} from 'react';\r\nimport \"./Xylophone.css\";\r\nimport {Instrument, InstrumentProps} from '../Instruments';\r\n\r\n/** ------------------------------------------------------------------------ **\r\n * Contains implementation of components for Xylophone\r\n ** ------------------------------------------------------------------------ */\r\ninterface Xylophone {\r\n    id: string;\r\n    note: string;\r\n    synth?: Tone.Synth;\r\n    sampler?: Tone.Sampler;\r\n    volume: number;\r\n}\r\n\r\nexport function DrumMachineKey({\r\n                                   synth,\r\n                                   sampler\r\n                               }: Xylophone): JSX.Element {\r\n\r\n    sampler = new Tone.Sampler({\r\n        urls: {\r\n            C: 'c.wav',\r\n            D1: 'd1.wav',\r\n            E1: 'e1.wav',\r\n            F: 'f.wav',\r\n            G: 'g.wav',\r\n            A: 'a.wav',\r\n            B: 'b.wav',\r\n            C1: 'c2.wav',\r\n            D: 'd1.wav',\r\n        },\r\n        release: 10,\r\n        baseUrl: 'http://localhost:3000/'\r\n    }).toDestination();\r\n\r\n    return (\r\n        // Observations:\r\n        // 1. The JSX refers to the HTML-looking syntax within TypeScript.\r\n        // 2. The JSX will be **transpiled** into the corresponding `React.createElement` library call.\r\n        // 3. The curly braces `{` and `}` should remind you of string interpolation.\r\n        <div\r\n            onMouseDown={() => synth?.triggerAttack(``)} // Question: what is `onMouseDown`?\r\n            onMouseUp={() => synth?.triggerRelease('+0.25')} // Question: what is `onMouseUp`?\r\n            className={classNames('ba pointer absolute dim', {})}\r\n            style={{\r\n                // CSS\r\n                top: 0,\r\n            }}\r\n        ></div>\r\n    );\r\n}\r\n\r\n/** Drum Machine - keys: id and notes\r\n **/\r\nfunction XylophoneMachine({synth, setSynth}: InstrumentProps, {sampler}: Xylophone): JSX.Element {\r\n    const [volume, setVolume] = useState<number>(5);\r\n    const recorder = new Tone.Recorder();\r\n    sampler?.connect(recorder);\r\n    const keys = List([\r\n        {id: 'C', note: 'C0'},\r\n        {id: 'D1', note: 'D1'},\r\n        {id: 'E1', note: 'E1'},\r\n        {id: 'F', note: 'F1'},\r\n        {id: 'G', note: 'G1'},\r\n        {id: 'A', note: 'A1'},\r\n        {id: 'B', note: 'B1'},\r\n        {id: 'C1', note: 'C1'},\r\n        {id: 'D', note: 'D0'}\r\n    ]);\r\n\r\n    function changeVolume(e: React.ChangeEvent<HTMLInputElement>) {\r\n        setVolume(e.target.value as unknown as number);\r\n        sampler?.disconnect();\r\n    }\r\n\r\n    return (\r\n        <div className=\"pv4\">\r\n            <div className=\"relative h4 w-200 ml4\">\r\n                <Container id={''} note={''} volume={volume}/>\r\n                {}\r\n            </div>\r\n            <div className='volume'>\r\n                <label>\r\n                    <input\r\n                        type='range'\r\n                        min={-60}\r\n                        max={15}\r\n                        value={volume}\r\n                        onChange={changeVolume}\r\n                    />\r\n                    Volume Control\r\n                </label>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function Container({sampler, volume}: Xylophone): JSX.Element {\r\n    sampler = new Tone.Sampler({\r\n        urls: {\r\n            C0: 'sounds/c.wav',\r\n            D1: 'sounds/d1.wav',\r\n            E1: 'sounds/e1.wav',\r\n            F1: 'sounds/f.wav',\r\n            G1: 'sounds/g.wav',\r\n            A1: 'sounds/a.wav',\r\n            B1: 'sounds/b.wav',\r\n            C1: 'sounds/c2.wav',\r\n            D0: 'sounds/d1.wav',\r\n        },\r\n        release: 10,\r\n        baseUrl: 'http://localhost:3000/'\r\n    }).toDestination();\r\n\r\n    sampler.volume.value = volume;\r\n    return (\r\n        <div>\r\n            <button className=\"C0\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`C0`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >C\r\n            </button>\r\n\r\n            <button className=\"D1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`D1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >D\r\n            </button>\r\n\r\n            <button className=\"E1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`E1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >E\r\n            </button>\r\n\r\n\r\n            <button className=\"F1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`F1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >F\r\n            </button>\r\n\r\n            <button className=\"G1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`G1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >G\r\n            </button>\r\n\r\n            <button className=\"A1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`A1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >A\r\n            </button>\r\n\r\n\r\n            <button className=\"B1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`B1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >B\r\n            </button>\r\n\r\n            <button className=\"C1\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`C1`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >C\r\n            </button>\r\n\r\n            <button className=\"D0\"\r\n                    onMouseDown={() => sampler?.triggerAttack(`D0`)}\r\n                    onMouseUp={() => sampler?.triggerRelease('')}\r\n            >D\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport const XylophoneInstrument = new Instrument('Xylophone', XylophoneMachine);\r\n","// 3rd party\nimport { List, Map } from 'immutable';\n\n// project dependencies\nimport { PianoInstrument } from './instruments/Piano';\nimport { GuitarInstrument } from './instruments/thetulga';\nimport { WaveformVisualizer } from './visualizers/Waveform';\nimport { StarVisualizer } from './visualizers/alfonsoduartesarabia';\nimport { Circle } from './visualizers/thetulga';\nimport { Smiley } from './visualizers/ezra';\nimport { DrumMachineInstrument } from './instruments/alfonsoduartesarabia';\nimport { FluteInstrument } from './instruments/ezraplayer';\nimport { MultiShapeVisualizer } from './visualizers/chaoyiying';\nimport { XylophoneInstrument } from \"./instruments/Xylophone\";\n\n/** ------------------------------------------------------------------------ **\n * The entire application state is stored in AppState.\n ** ------------------------------------------------------------------------ */\n\n/**\n * Observation: pure map (compare and contrast with impure map)\n *\n * 'instrument': Instrument\n * 'visualizer': Visualizer\n */\nexport type AppState = Map<string, any>;\n\nconst instruments = List([PianoInstrument, GuitarInstrument,FluteInstrument,DrumMachineInstrument,XylophoneInstrument]);\nconst visualizers = List([WaveformVisualizer, StarVisualizer, Circle, Smiley, MultiShapeVisualizer]);\nexport const defaultState: AppState = Map<string, any>({\n  instruments,\n  visualizers,\n});\n","// 3rd party library imports\nimport { useReducer, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route, HashRouter } from 'react-router-dom';\n\n// project imports\nimport { MainPage } from './MainPage';\nimport { DispatchAction, appReducer } from './Reducer';\nimport { defaultState } from './State';\nimport { initializeSocket, send } from './Socket';\n\n// css imports\nimport 'animate.css';\n\n/** ------------------------------------------------------------------------ **\n * App component\n ** ------------------------------------------------------------------------ */\n\nfunction App() {\n  const [state, dispatch] = useReducer(appReducer, defaultState);\n\n  useEffect(() => {\n    initializeSocket(\n      async socket => {\n        dispatch(new DispatchAction('SET_SOCKET', { socket }));\n        const response  = await send(socket, 'get_songs', {});\n        dispatch(new DispatchAction('SET_SONGS', { songs: response }));\n      },\n      () => {\n        dispatch(new DispatchAction('DELETE_SOCKET'));\n      },\n    );\n  }, []);\n\n  return (\n    <HashRouter>\n      <Switch>\n        <Route path=\"/aplusmajor\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"/aplusmajor/:instrument\">\n          <MainPage state={state} dispatch={dispatch} />\n        </Route>\n        <Route path=\"*\">\n          <div>404</div>\n        </Route>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","// 3rd party library imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// project imports\nimport App from './App';\n\n// CSS\nimport './index.css';\nimport './tachyons.css';\n\n\n/** ------------------------------------------------------------------------ **\n * Entry point.\n ** ------------------------------------------------------------------------ */\n\nfunction onReactLoaded() {\n  console.log('React has loaded.');\n}\n\nconst rootEl = document.getElementById('root');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootEl,  // Insert into DOM here\n  onReactLoaded,\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"Grid_row__DxfQw\",\"expanded\":\"Grid_expanded__78BO9\",\"flex-start\":\"Grid_flex-start__2RQPh\",\"center\":\"Grid_center__2rFBM\",\"flex-end\":\"Grid_flex-end__31hXp\",\"space-between\":\"Grid_space-between__2SXwQ\",\"space-around\":\"Grid_space-around__2e6VH\",\"space-evenly\":\"Grid_space-evenly__mWmFI\",\"align-center\":\"Grid_align-center__3CimK\",\"column\":\"Grid_column__FAHW9\",\"sm-1\":\"Grid_sm-1__3ag9L\",\"sm-2\":\"Grid_sm-2__QMKSW\",\"sm-3\":\"Grid_sm-3__jv5zo\",\"sm-4\":\"Grid_sm-4__3T7Uk\",\"sm-5\":\"Grid_sm-5__1mLdW\",\"sm-6\":\"Grid_sm-6__3KBFO\",\"sm-7\":\"Grid_sm-7__29c_t\",\"sm-8\":\"Grid_sm-8__1Dk7D\",\"sm-9\":\"Grid_sm-9__xelIl\",\"sm-10\":\"Grid_sm-10__1aDHe\",\"sm-11\":\"Grid_sm-11__1krLG\",\"sm-12\":\"Grid_sm-12__2z3na\",\"md-1\":\"Grid_md-1__Uox7H\",\"md-2\":\"Grid_md-2__2qjad\",\"md-3\":\"Grid_md-3__1xvg1\",\"md-4\":\"Grid_md-4__8gD71\",\"md-5\":\"Grid_md-5__3t5ZI\",\"md-6\":\"Grid_md-6__2lStL\",\"md-7\":\"Grid_md-7__XRANr\",\"md-8\":\"Grid_md-8__Bk8Cd\",\"md-9\":\"Grid_md-9__3shiV\",\"md-10\":\"Grid_md-10__plYWv\",\"md-11\":\"Grid_md-11__3n48Z\",\"md-12\":\"Grid_md-12__iLaQ7\",\"lg-1\":\"Grid_lg-1__wZPC9\",\"lg-2\":\"Grid_lg-2__3tNW5\",\"lg-3\":\"Grid_lg-3__wik3_\",\"lg-4\":\"Grid_lg-4__1JjDE\",\"lg-5\":\"Grid_lg-5__3C1N6\",\"lg-6\":\"Grid_lg-6__1xynm\",\"lg-7\":\"Grid_lg-7__Ku9Qv\",\"lg-8\":\"Grid_lg-8__tCZuP\",\"lg-9\":\"Grid_lg-9__3o-0p\",\"lg-10\":\"Grid_lg-10__osA9R\",\"lg-11\":\"Grid_lg-11__2O3o8\",\"lg-12\":\"Grid_lg-12__98Ed4\"};"],"sourceRoot":""}